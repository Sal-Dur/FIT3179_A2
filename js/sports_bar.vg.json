{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "Top 10 most popular sports among Australian women by participation count",
  "title": "Top 10 Sports for Women in Australia (Number of Participants)",
  "width": 900,
  "height": 500,

  "data": {
    "url": "data/SportByGenderABS.csv",
    "format": {
      "type": "csv",
      "parse": {
        "participation": "number"
      }
    }
  },

  "transform": [
    { "filter": "datum.Gender === 'Female'" },
    {
      "window": [{ "op": "rank", "as": "rank" }],
      "sort": [{ "field": "participation", "order": "descending" }]
    },
    { "filter": "datum.rank <= 10" }
  ],

  "mark": {
    "type": "bar",
    "color": "#ec407a",
    "cornerRadiusTopLeft": 5,
    "cornerRadiusTopRight": 5
  },

  "encoding": {
    "x": {
      "field": "Sport",
      "type": "nominal",
      "sort": "-y",
      "axis": {
        "labelAngle": -30,
        "title": "Sport"
      }
    },
    "y": {
      "field": "participation",
      "type": "quantitative",
      "title": "Number of Participants",
      "axis": {
        "format": ",",
        "labelExpr": "format(datum, ',')"
      }
    },
    "tooltip": [
      {
        "field": "Sport",
        "type": "nominal",
        "title": "Sport"
      },
      {
        "field": "participation",
        "type": "quantitative",
        "format": ",",
        "title": "Participants"
      }
    ]
  }
}
