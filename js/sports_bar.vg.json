{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "Most popular sports among Australian women by participation rate",
  "title": "Most Popular Sports for Women in Australia",
  "width": 900,
  "height": 500,

  "data": {
    "url": "data/SportByGenderABS.csv"
  },

  "transform": [
    { "filter": "datum.Gender == 'Female'" },
    { "calculate": "toNumber(datum.Participation)", "as": "ParticipationRate" },
    { "window": [{"op": "rank", "as": "rank"}], "sort": [{"field": "ParticipationRate", "order": "descending"}] },
    { "filter": "datum.rank <= 10" }
  ],

  "mark": {
    "type": "bar",
    "cornerRadiusTopLeft": 5,
    "cornerRadiusTopRight": 5
  },

  "encoding": {
    "x": {
      "field": "Sport",
      "type": "nominal",
      "sort": "-y",
      "axis": {"labelAngle": -30, "title": "Sport"}
    },
    "y": {
      "field": "ParticipationRate",
      "type": "quantitative",
      "title": "Participation (%)"
    },
    "color": {
      "field": "ParticipationRate",
      "type": "quantitative",
      "scale": {"scheme": "blues"}
    },
    "tooltip": [
      {"field": "Sport", "type": "nominal"},
      {"field": "ParticipationRate", "type": "quantitative", "format": ".1f", "title": "Participation (%)"}
    ]
  }
}
