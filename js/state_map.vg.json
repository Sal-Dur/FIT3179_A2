{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "Female participation by state — highlighting ≥50% vs <50%",
  "title": "Female Participation in Regular Exercise (≥ 3 times per week)",
  "width": 950,
  "height": 600,

  "data": {
    "url": "topojson/au-states-topo.json",
    "format": { "type": "topojson", "feature": "AUS_adm1" }
  },

  "transform": [
    {
      "lookup": "id",
      "from": {
        "data": { "url": "data/female_participation.csv" },
        "key": "id",
        "fields": ["State", "Percentage"]
      }
    },
    {
      "calculate": "datum.Percentage >= 50 ? '≥ 50% (Regular)' : '< 50% (Less Regular)'",
      "as": "Category"
    }
  ],

  "projection": { "type": "mercator" },

  "mark": { "type": "geoshape", "stroke": "white", "strokeWidth": 1 },

  "encoding": {
    "color": {
      "field": "Category",
      "type": "nominal",
      "scale": {
        "domain": ["≥ 50% (Regular)", "< 50% (Less Regular)"],
        "range": ["#4CAF50", "#EF5350"]
      },
      "legend": { "title": "Female Regular Exercise" }
    },
    "tooltip": [
      { "field": "State", "title": "State" },
      {
        "field": "Percentage",
        "type": "quantitative",
        "format": ".1f",
        "title": "% Exercising Regularly"
      }
    ]
  }
}
