{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "Pie chart comparing male vs female participation for a selected sport",
  "title": "Gender Distribution by Sport",
  "width": 400,
  "height": 400,

  "params": [
    {
      "name": "selectedSport",
      "value": "Football",
      "bind": {
        "input": "select",
        "options": [
          "Aqua aerobics",
          "Athletics, track and field",
          "Australian Rules football",
          "Badminton",
          "Basketball (indoor & outdoor)",
          "Boxing",
          "Bush walking",
          "Canoeing / Kayaking / Dragon boat racing",
          "Cross country running",
          "Cycling / BMXing",
          "Dancing / Ballet",
          "Fishing",
          "Fitness / Gym",
          "Football sports (excluding, rugby, soccer, Australian Rules football)",
          "Golf",
          "Gymnastics",
          "Hockey (indoor and outdoor)",
          "Horse riding / Equestrian activities / Polo",
          "Ice / snow sports",
          "Indoor cricket",
          "Indoor soccer",
          "Jogging / Running",
          "Lawn bowls",
          "Lifesaving",
          "Martial arts",
          "Motor sports",
          "Netball (Indoor and outdoor)",
          "Outdoor cricket",
          "Outdoor soccer",
          "Pilates",
          "Rock climbing / Abseiling / Caving",
          "Rowing",
          "Rugby league",
          "Rugby union",
          "Sailing",
          "Scuba diving / Snorkelling",
          "Shooting sports",
          "Skateboarding / Inline hockey / Roller sports",
          "Softball / Tee ball",
          "Squash / Racquetball",
          "Surf sports",
          "Swimming / Diving",
          "Table tennis",
          "Tennis (indoor and outdoor)",
          "Tenpin bowling",
          "Trail bike riding",
          "Triathlons",
          "Volleyball (indoor and outdoor)",
          "Walking for exercise",
          "Water polo",
          "Water volleyball / Rafting / Other water sports",
          "Waterskiing / Powerboating",
          "Weight lifting / Powerlifting / Body building",
          "Yoga"
        ],
        "name": "Choose a Sport: "
      }
    }
  ],

  "data": {
    "url": "data/SportByGenderABS.csv",
    "format": {
      "type": "csv",
      "parse": {
        "participation": "number"
      }
    }
  },

  "transform": [
    {
      "filter": "datum.Sport === selectedSport"
    },
    {
      "aggregate": [{ "op": "sum", "field": "participation", "as": "TotalParticipation" }],
      "groupby": ["Gender"]
    }
  ],

  "mark": {
    "type": "arc",
    "tooltip": true,
    "outerRadius": 150
  },

  "encoding": {
    "theta": {
      "field": "TotalParticipation",
      "type": "quantitative"
    },
    "color": {
      "field": "Gender",
      "type": "nominal",
      "scale": {
        "domain": ["Female", "Male"],
        "range": ["#ec407a", "#42A5F5"]
      },
      "legend": { "title": "Gender" }
    },
    "tooltip": [
      { "field": "Gender", "type": "nominal" },
      {
        "field": "TotalParticipation",
        "type": "quantitative",
        "format": ",",
        "title": "Participants"
      }
    ]
  },

  "view": { "stroke": null }
}
