{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "Comparison of male and female participation counts by sport",
  "title": "Men vs Women: Number of Participants by Sport",
  "width": 950,
  "height": 550,

  "data": { "url": "data/SportByGenderABS.csv" },

  "transform": [
    { "calculate": "toNumber(datum.participation)", "as": "ParticipationCount" },
    { "filter": "isValid(datum.ParticipationCount)" }
  ],

  "mark": { "type": "bar", "cornerRadiusTopLeft": 4, "cornerRadiusTopRight": 4 },

  "encoding": {
    "x": {
      "field": "Sport",
      "type": "nominal",
      "axis": { "labelAngle": -30, "title": "Sport" },
      "sort": {
        "field": "ParticipationCount",
        "op": "max",
        "order": "descending"
      }
    },
    "y": {
      "field": "ParticipationCount",
      "type": "quantitative",
      "title": "Number of Participants",
      "axis": { "format": "," }
    },
    "color": {
      "field": "Gender",
      "type": "nominal",
      "scale": { "domain": ["Female", "Male"], "range": ["#e64072", "#42A5F5"] },
      "legend": { "title": "Gender" }
    },
    "xOffset": { "field": "Gender" },
    "tooltip": [
      { "field": "Sport", "type": "nominal" },
      { "field": "Gender", "type": "nominal" },
      {
        "field": "ParticipationCount",
        "type": "quantitative",
        "format": ",",
        "title": "Participants"
      }
    ]
  }
}
